<!DOCTYPE html>
<html>
  <head>
    <title>Legislators Locate - Compare Congress</title>
    <link rel="stylesheet" href="compare-congress.css" />
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="vars.js"></script>
    <!-- <script src="compare-congress.jquery.js"></script> -->
  </head>
  <body>
    <h1>Legislators Locate - Compare Congress</h1>
    <h2>Locate Legislators by Zip Code</h2>
    <form method="post">
      <fieldset><legend>Locate Legislators by Zip Code</legend>
        <label for="zip-code-user">Enter a Zip Code
          <input type="text" required="required" pattern="\d+" value="" name="zip-code-user" id="zip-code-user" placeholder="01234" /></label>
        <input type="submit" id="submit" value="Submit" />
      </fieldset>
    </form>
    <table>
      <thead><tr><th>Bioguide ID</th><th>Birthday</th><th>Chamber</th><th>Contact Form</th><th>CRP ID</th><th>District</th><th>Facebook ID</th><th>Fax</th><th>FEC IDs</th><th>First Name</th><th>Gender</th><th>Govtrack ID</th><th>In Office</th><th>Last Name</th><th>Leadership Role</th><th>Middle Name</th><th>Name Suffix</th><th>Nickname</th><th>OC Email</th><th>OCD ID</th><th>Office</th><th>Party</th><th>Phone</th><th>State</th><th>State Name</th><th>Term End</th><th>Term Start</th><th>Thomas ID</th><th>Title</th><th>Twitter ID</th><th>Website</th></tr></thead>
      <tbody></tbody>
    </table>
  </body>


<script>
$(document).ready(function () {

    $("#submit").click(function () {
    
  
    var userZipCode = $("#zip-code-user").val();
    // console.log(userZipCode);
    var apiCallLegislatorsLocateByZip = apiURLStub1 + apiURLStubLegislatorsLocate + apiURLStubZip + userZipCode + apiURLStubAPIKey;
    console.log(apiCallLegislatorsLocateByZip);

    $.getJSON(apiCallLegislatorsLocateByZip, function (data) {
      // console.log(apiCallLegislatorsLocateByZip);

        var jsonData = data.results;
        console.log(jsonData);
        $.each(jsonData, function(){
           // $("ul").append("<li>Name: "+this['name']+"</li><li>Chamber: "+this['chamber']+"</li><li>Committee ID: "+this['committee_id']+"</li><li>Parent Committee ID: "+this['parent_committee_id']+"</li><li>Subcommittee: "+this['subcommittee']+"</li>");
           $("tbody").append("<tr><td>"+this['bioguide_id']+"</td><td>"+this['birthday']+"</td><td>"+this['chamber']+"</td><td>"+this['contact_form']+"</td><td>"+this['crp_id']+"</td><td>"+this['district']+"</td><td>"+this['facebook_id']+"</td><td>"+this['fax']+"</td><td>"+this['fec_ids']+"</td><td>"+this['first_name']+"</td><td>"+this['gender']+"</td><td>"+this['govtrack_id']+"</td><td>"+this['in_office']+"</td><td>"+this['last_name']+"</td><td>"+this['leadership_role']+"</td><td>"+this['middle_name']+"</td><td>"+this['name_suffix']+"</td><td>"+this['nickname']+"</td><td>"+this['oc_email']+"</td><td>"+this['ocd_id']+"</td><td>"+this['office']+"</td><td>"+this['party']+"</td><td>"+this['phone']+"</td><td>"+this['state']+"</td><td>"+this['state_name']+"</td><td>"+this['term_end']+"</td><td>"+this['term_start']+"</td><td>"+this['thomas_id']+"</td><td>"+this['title']+"</td><td>"+this['twitter_id']+"</td><td>"+this['website']+"</td></tr>");
     });
    });



    });

});
</script>
</html>
